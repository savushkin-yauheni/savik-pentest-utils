import os
import sys
from multiprocessing import freeze_support

sys.path.append(os.getcwd())

from utils.apk_utils import extract_apk, get_apk_provider
from utils.io_utils import create_directory

# 1. install dependencies, check README
# 2. Install apkeep https://github.com/EFForg/apkeep
# 3. Install apktool https://github.com/iBotPeaches/Apktool
# 4. python3 examples/apk-downloader-and-extractor.py com.keepersecurity.chat

if __name__ == '__main__':
    freeze_support()
    apk_package = sys.argv[1:][0]
    apk_file_location = get_apk_provider().download_apk(apk_package)
    extract_to_folder = create_directory()
    extract_apk(apk_file_location, extract_to_folder)
    print(extract_to_folder)
